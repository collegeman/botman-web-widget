const n=window.screen.width<640;let d=window.botmanWidget,p=new String(n?d.mobileWidth:d.desktopWidth);p.indexOf("%")===-1&&(p+="px");let m=new String(n?d.mobileHeight:d.desktopHeight);m.indexOf("%")===-1&&(m+="px");let b=d.frameEndpoint;n&&(b.indexOf("?")===-1?b+="?mobile=true":b+="&mobile=true");let w=d.beaconEndpoint;n&&(w.indexOf("?")===-1?w+="?mobile=true":w+="&mobile=true");let o=document.createElement("iframe");o.src=b;o.style.position="fixed";o.style.bottom=n?"0":"120px";o.style.right=n?"0":"40px";o.style.zIndex="1200";o.style.width=p;o.style.height=m;o.style.border="none";o.style.display="none";document.body.appendChild(o);let i=document.createElement("iframe");i.src=w;i.style.position="fixed";i.style.bottom=n?"20px":"40px";i.style.right=n?"20px":"40px";i.style.zIndex="1000";i.style.width=d.beaconSize+15+"px";i.style.height=d.beaconSize+15+"px";i.style.border="none";document.body.appendChild(i);let l=!1;const s=(t,a)=>{let e={method:t,params:a};o.contentWindow.postMessage(e),i.contentWindow.postMessage(e)},M=(t,a)=>{let e={method:t,params:a};i.contentWindow.postMessage(e)},u=t=>{var a,e;((a=t.data.method)==null?void 0:a.indexOf("botman-web-widget.chat."))!==-1&&M(t.data.method,t.data.params),((e=t.data.method)==null?void 0:e.indexOf("botman-web-widget.beacon."))!==-1&&s(t.data.method,t.data.params)},h=()=>{u({data:{method:"botman-web-widget.widget.toggle",params:{open:l}}}),o.style.display=l?"block":"none"},c={open(){l=!0,h()},close(){l=!1,h()},toggle(){l=!l,h()},say(t){s("botman-web-widget.chat.say",typeof t!="object"?{text:t}:t)},writeToMessages(t){s("botman-web-widget.chat.writeToMessages",typeof t!="object"?{text:t}:t)},whisper(t){s("botman-web-widget.chat.whisper",typeof t!="object"?{text:t}:t)},sayAsBot(t){s("botman-web-widget.chat.sayAsBot",typeof t!="object"?{text:t}:t)},page(t){s("botman-web-widget.chat.page",{id:t})},api(t,a=!1,e=null){s("botman-web-widget.chat.api",typeof t=="object"?t:{text:t,interactive:a,attachment:e})}},W=()=>{window.botmanChatWidget=c,d.openByDefault&&c.open()};window.addEventListener("message",t=>{var a,e,g,f,r,y,x;u(t),((a=t.data)==null?void 0:a.method)==="botman-web-widget.chat.init"&&W(),((e=t.data)==null?void 0:e.method)==="botman-web-widget.beacon.click"&&c.toggle(),((g=t.data)==null?void 0:g.method)==="botman-web-widget.chat.close"&&c.close(),((f=t.data)==null?void 0:f.method)==="botman-web-widget.chat.esc"&&c.close(),((r=t.data)==null?void 0:r.method)==="botman-web-widget.beacon.esc"&&c.close(),((y=t.data)==null?void 0:y.method)==="botman-web-widget.chat.api.response"&&console.log(t.data.params),((x=t.data)==null?void 0:x.method)==="botman-web-widget.chat.api.error"&&console.log(t.data.params)});
