const n=window.screen.width<640;let d=window.botmanWidget,h=new String(n?d.mobileWidth:d.desktopWidth);h.indexOf("%")===-1&&(h+="px");let g=new String(n?d.mobileHeight:d.desktopHeight);g.indexOf("%")===-1&&(g+="px");let c=d.frameEndpoint;n&&(c.indexOf("?")===-1?c+="?mobile=true":c+="&mobile=true");let m=d.beaconEndpoint;n&&(m.indexOf("?")===-1?m+="?mobile=true":m+="&mobile=true");let o=document.createElement("iframe");o.src=c;o.style.position="fixed";o.style.bottom=n?"0":"120px";o.style.right=n?"0":"40px";o.style.zIndex="1200";o.style.width=h;o.style.height=g;o.style.border="none";o.style.display="none";document.body.appendChild(o);let i=document.createElement("iframe");i.src=m;i.style.position="fixed";i.style.bottom=n?"20px":"40px";i.style.right=n?"20px":"40px";i.style.zIndex="1000";i.style.width=d.beaconSize+15+"px";i.style.height=d.beaconSize+15+"px";i.style.border="none";document.body.appendChild(i);let s=!1;const y=(e,a)=>{let t={method:e,params:a};o.contentWindow.postMessage(t),i.contentWindow.postMessage(t)},W=(e,a)=>{let t={method:e,params:a};i.contentWindow.postMessage(t)},u=e=>{var a,t;((a=e.data.method)==null?void 0:a.indexOf("botman-web-widget.chat."))!==-1&&W(e.data.method,e.data.params),((t=e.data.method)==null?void 0:t.indexOf("botman-web-widget.beacon."))!==-1&&y(e.data.method,e.data.params)},b=()=>{u({data:{method:"botman-web-widget.widget.toggle",params:{open:s}}}),o.style.display=s?"block":"none"},l={open(){s=!0,b()},close(){s=!1,b()},toggle(){s=!s,b()},say(e){},whisper(e){},sayAsBot(e){},api(e,a=!1,t=null){y("botman-web-widget.chat.api",{text:e,interactive:a,attachment:t})}},E=()=>{window.botmanChatWidget=l};window.addEventListener("message",e=>{var a,t,p,w,r,f,x;u(e),((a=e.data)==null?void 0:a.method)==="botman-web-widget.chat.init"&&E(),((t=e.data)==null?void 0:t.method)==="botman-web-widget.beacon.click"&&l.toggle(),((p=e.data)==null?void 0:p.method)==="botman-web-widget.chat.close"&&l.close(),((w=e.data)==null?void 0:w.method)==="botman-web-widget.chat.esc"&&l.close(),((r=e.data)==null?void 0:r.method)==="botman-web-widget.beacon.esc"&&l.close(),((f=e.data)==null?void 0:f.method)==="botman-web-widget.chat.api.response"&&console.log(e.data.params),((x=e.data)==null?void 0:x.method)==="botman-web-widget.chat.api.error"&&console.log(e.data.params)});
