(function(){const n=window.screen.width<640;let d=window.botmanWidget,h=new String(n?d.mobileWidth:d.desktopWidth);h.indexOf("%")===-1&&(h+="px");let m=new String(n?d.mobileHeight:d.desktopHeight);m.indexOf("%")===-1&&(m+="px");let b=d.frameEndpoint;n&&(b.indexOf("?")===-1?b+="?mobile=true":b+="&mobile=true");let w=d.beaconEndpoint;n&&(w.indexOf("?")===-1?w+="?mobile=true":w+="&mobile=true");let l=!1,e=document.createElement("iframe");e.src=b,e.style.position="fixed",e.style.bottom=n?"0":"120px",e.style.right=n?"0":"40px",e.style.zIndex="1200",e.style.width=h,e.style.height=m,e.style.border="none",e.style.display="none";let a=document.createElement("iframe");a.src=w,a.style.position="fixed",a.style.bottom=n?"20px":"40px",a.style.right=n?"20px":"40px",a.style.zIndex="1000",a.style.width=d.beaconSize+15+"px",a.style.height=d.beaconSize+15+"px",a.style.border="none";const s=(t,i)=>{let o={method:t,params:i};e.contentWindow.postMessage(o),a.contentWindow.postMessage(o)},M=(t,i)=>{let o={method:t,params:i};a.contentWindow.postMessage(o)},g=t=>{var i,o;((i=t.data.method)==null?void 0:i.indexOf("botman-web-widget.chat."))!==-1&&M(t.data.method,t.data.params),((o=t.data.method)==null?void 0:o.indexOf("botman-web-widget.beacon."))!==-1&&s(t.data.method,t.data.params)},p=()=>{g({data:{method:"botman-web-widget.widget.toggle",params:{open:l}}}),e.style.display=l?"block":"none"},c={open(){l=!0,p()},close(){l=!1,p()},toggle(){l=!l,p()},say(t){s("botman-web-widget.chat.say",typeof t!="object"?{text:t}:t)},writeToMessages(t){s("botman-web-widget.chat.writeToMessages",typeof t!="object"?{text:t}:t)},whisper(t){s("botman-web-widget.chat.whisper",typeof t!="object"?{text:t}:t)},sayAsBot(t){s("botman-web-widget.chat.sayAsBot",typeof t!="object"?{text:t}:t)},page(t){s("botman-web-widget.chat.page",{id:t})},api(t,i=!1,o=null){s("botman-web-widget.chat.api",typeof t=="object"?t:{text:t,interactive:i,attachment:o})}},E=()=>{window.botmanChatWidget=c,d.openByDefault&&c.open()};window.addEventListener("message",t=>{var i,o,f,r,y,x,u;g(t),((i=t.data)==null?void 0:i.method)==="botman-web-widget.chat.init"&&E(),((o=t.data)==null?void 0:o.method)==="botman-web-widget.beacon.click"&&c.toggle(),((f=t.data)==null?void 0:f.method)==="botman-web-widget.chat.close"&&c.close(),((r=t.data)==null?void 0:r.method)==="botman-web-widget.chat.esc"&&c.close(),((y=t.data)==null?void 0:y.method)==="botman-web-widget.beacon.esc"&&c.close(),((x=t.data)==null?void 0:x.method)==="botman-web-widget.chat.api.response"&&console.log(t.data.params),((u=t.data)==null?void 0:u.method)==="botman-web-widget.chat.api.error"&&console.log(t.data.params)}),document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(e),document.body.appendChild(a)})})();
