import{c as l,o as c,a as r,r as p,b as h,t as _,w as u,n as m,d as b,_ as f,e as $,f as w,g as i,h as d,u as k,i as v,j as C,k as y}from"./_plugin-vue_export-helper-Dw_EUPTg.js";const M=["innerHTML"],x=["innerHTML"],B={__name:"ChatHeader",emits:["back","close"],setup(t,{emit:e}){const s=e;return(o,a)=>(c(),l("div",{class:m(["shrink-0 p-2 relative",{"rounded-t-lg":!o.$store.state.config.isMobile}]),style:b({backgroundColor:o.$store.state.config.mainColor})},[r("div",{class:"flex-grow text-white text-sm text-center cursor-pointer",onClick:a[0]||(a[0]=u(n=>s("close"),["prevent"]))},[p(o.$slots,"content",{},()=>[h(_(o.$store.state.title),1)])]),r("button",{class:"absolute left-2 top-1/2 -translate-y-1/2 outline-none text-white text-sm",onClick:a[1]||(a[1]=u(n=>s("back"),["prevent"]))},[r("span",{class:"icon block h-4 w-4",innerHTML:o.$store.state.config.icons.back},null,8,M),a[3]||(a[3]=r("span",{class:"sr-only"},"Back",-1))]),r("button",{class:m(["absolute right-2 top-1/2 -translate-y-1/2 outline-none text-white text-sm",{hidden:!o.$store.state.config.isMobile}]),onClick:a[2]||(a[2]=u(n=>s("close"),["prevent"]))},[r("span",{class:"icon block h-4 w-4",innerHTML:o.$store.state.config.icons.close},null,8,x),a[4]||(a[4]=r("span",{class:"sr-only"},"Close",-1))],2)],6))}},L={},S={class:"flex-grow overflow-y-auto"};function T(t,e){return c(),l("div",S,[p(t.$slots,"default")])}const H=f(L,[["render",T]]),E={},N={class:"flex"};function V(t,e){return c(),l("div",N,[p(t.$slots,"default")])}const z=f(E,[["render",V]]),W={__name:"ChatPage",props:{id:{type:String,required:!0}},setup(t){return(e,s)=>(c(),l("div",null,[p(e.$slots,"heading")]))}},j={__name:"Chat",setup(t){window.addEventListener("message",s=>{var o,a;((o=s.data)==null?void 0:o.method)==="botman-web-widget.widget.toggle"&&($store.state.open=s.data.params.open),((a=s.data)==null?void 0:a.method)==="botman-web-widget.chat.api"&&$(s.data.params.text,s.data.params.interactive,s.data.params.attachment,null,n=>{i("chat.api.response",n)},n=>{i("chat.api.error",{message:n.message,status:n.response.status,headers:n.response.headers,data:n.response.data})})}),w(()=>i("chat.init"));const e=()=>{i("chat.back")};return document.addEventListener("keydown",s=>{s.key==="Escape"&&i("chat.esc")}),(s,o)=>(c(),l("div",{class:m(["flex flex-col bg-gray-100 border-gray-200 p-0 h-screen",{"rounded-lg border":!s.$store.state.config.isMobile}])},[d(B,{onBack:e,onClose:o[0]||(o[0]=a=>k(i)("chat.close"))}),d(H,null,{default:v(()=>[d(W,{id:"home",title:"Start a conversation",description:"What channel do you prefer?"})]),_:1}),d(z)],2))}},g=C(j),q=y({state:{config:window.botmanWidget,open:!1,title:"Chat",messages:[],conversation:null},mutations:{setTitle(t,e){t.title=e},setOpen(t,e){t.open=e},addMessage(t,e){t.messages.push(e)},setMessages(t,e){t.messages=e},setConversation(t,e){t.conversation=e}}});g.use(q);g.mount("#chat");
